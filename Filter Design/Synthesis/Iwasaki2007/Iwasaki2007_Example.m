fs = 100;
P_c = tf(1, [1 0.5 0 -0.5]);
P_d = [c2d(P_c, 1/fs) c2d(P_c, 1/fs)];
P_d.inputName = {'d', 'u'};
P_d.outputName = {'y'};
f0 = 0.5/(2*pi);
f1 = 3/(2*pi);
f2 = 0.8/(2*pi);
gam0 = -1;
gam1 = 1000;
gam2 = 1000;
w0 = pi*(f0/fs);
w1 = pi*(f1/fs);
w2 = pi*(f2/fs);
passThrough = ss(tf(1, 1, 1/fs));
P_gen = generalizeplant(ss(P_d), [], passThrough, passThrough, 'UncertaintySz', [0 1]);
% synOpt = defineSynOpt(gam0, Inf, [0 w0], 1, 2, gam1, Inf, [w1 pi], 2, 1, gam2, Inf, [w2 pi], 2, 2);
synOpt = defineSynOpt(gam0, Inf, [0 w0], 1, 2, gam2, Inf, [0 w2], 2, 2);
[K, CL, synOpt, ymDiagnostics] = dtsyn_gkyp_stab(P_gen, synOpt, 1, 1, 'DISPLAY', 'on', 'EXTENDED', true);
%K_c = zpk([-2.911 -0.561+1i*0.812 -0.561-1i*0.812], [-1.705 -1.052+1i*1.771 -1.052-1i*1.771], -2.6793);